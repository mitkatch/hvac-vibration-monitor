# I2C and sensor
CONFIG_I2C=y
CONFIG_SENSOR=y

# Logging
CONFIG_LOG=y
CONFIG_LOG_MODE_IMMEDIATE=y

# Increase stack size for buffer + BLE
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048
CONFIG_BT_RX_STACK_SIZE=2048

# Floating point printf
CONFIG_CBPRINTF_FP_SUPPORT=y

# ============================================
# Bluetooth Low Energy (BLE)
# ============================================
CONFIG_BT=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_DEVICE_NAME="HVAC-Vibe"

# GATT
CONFIG_BT_GATT_DYNAMIC_DB=n

# Connection parameters
CONFIG_BT_MAX_CONN=1

# MTU size (increase for larger packets)
CONFIG_BT_L2CAP_TX_MTU=247
CONFIG_BT_BUF_ACL_TX_SIZE=251
CONFIG_BT_BUF_ACL_RX_SIZE=251

# Enable privacy (optional)
# CONFIG_BT_PRIVACY=y

# Debug (optional - disable in production)
# CONFIG_BT_DEBUG_LOG=y
# ════════════════════════════════════════════════════════════════
# BLE Security Configuration Additions
# ════════════════════════════════════════════════════════════════
# Add these lines to your existing prj.conf file

# ────────────────────────────────────────────────────────────────
# Security Manager (SM) - Required for pairing/bonding
# ────────────────────────────────────────────────────────────────
CONFIG_BT_SMP=y

# ────────────────────────────────────────────────────────────────
# Bonding - Store pairing keys in flash
# ────────────────────────────────────────────────────────────────
CONFIG_BT_SETTINGS=y
CONFIG_SETTINGS=y
CONFIG_FLASH=y
CONFIG_FLASH_MAP=y
CONFIG_NVS=y

# Settings backend
CONFIG_SETTINGS_RUNTIME=y

# Flash storage for NVS (Non-Volatile Storage)
CONFIG_NVS_LOG_LEVEL_WRN=y

# ────────────────────────────────────────────────────────────────
# Pairing Configuration
# ────────────────────────────────────────────────────────────────
# Fixed passkey mode (we generate random passkey at runtime)
CONFIG_BT_FIXED_PASSKEY=n

# Enable passkey display (our device shows PIN to user)
CONFIG_BT_SMP_APP_PAIRING_ACCEPT=y

# ────────────────────────────────────────────────────────────────
# LE Secure Connections (recommended for better security)
# ────────────────────────────────────────────────────────────────
CONFIG_BT_SMP_SC_PAIR_ONLY=n
CONFIG_BT_SMP_SC_ONLY=n

# ────────────────────────────────────────────────────────────────
# Random Number Generator - Required for PIN generation
# ────────────────────────────────────────────────────────────────
CONFIG_ENTROPY_GENERATOR=y
CONFIG_ENTROPY_NRF5_RNG=y

# ────────────────────────────────────────────────────────────────
# Maximum number of bonded devices
# ────────────────────────────────────────────────────────────────
# Set to 1 for single-phone pairing, or higher for multiple devices
CONFIG_BT_MAX_PAIRED=4

# ────────────────────────────────────────────────────────────────
# Logging for debugging (optional, can reduce for production)
# ────────────────────────────────────────────────────────────────
CONFIG_BT_SMP_LOG_LEVEL_INF=y
CONFIG_BT_KEYS_LOG_LEVEL_WRN=y

# ────────────────────────────────────────────────────────────────
# GATT Security
# ────────────────────────────────────────────────────────────────
# Require authentication before allowing GATT operations
CONFIG_BT_GATT_ENFORCE_SUBSCRIPTION=y

# ════════════════════════════════════════════════════════════════
# End of Security Configuration
# ════════════════════════════════════════════════════════════════